"use strict";(self.webpackChunkgamysh=self.webpackChunkgamysh||[]).push([[64],{9483:function(e,n,l){l(7539),l(7283);var s=l(2791),r=l(184);n.Z=function(e){var n=e.icon,l=e.handleClick,t=(e.tooltip,(0,s.useRef)());return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{type:"button",ref:t,ripple:"light",onClick:l,className:"flex justify-center items-center w-10 h-10 mx-2 hover:text-white hover:bg-indigo-600 active:bg-white active:text-indigo-600 rounded-md focus:outline-none shadow-lg text-indigo-600 bg-white",children:n})})}},1758:function(e,n,l){var s=l(885),r=l(2791),t=l(184);n.Z=function(e){var n=e.children,l=(0,r.useState)(!1),a=(0,s.Z)(l,2),i=a[0],o=a[1];return(0,t.jsx)("div",{onClick:function(){return o(!i)},className:"".concat(i?"":"w-full sm:max-w-200 md:max-w-250 lg:max-w-xs overflow-ellipsis overflow-hidden md:whitespace-nowrap"," text-base hover:text-blue-500 cursor-pointer px-2"),children:n})}},6601:function(e,n,l){var s=l(184);n.Z=function(e){var n=e.children;return(0,s.jsx)("tbody",{children:n})}},7915:function(e,n,l){var s=l(184);n.Z=function(e){var n=e.children;return(0,s.jsx)("td",{children:n})}},8636:function(e,n,l){var s=l(184);n.Z=function(e){var n=e.children;return(0,s.jsx)("thead",{className:"sticky top-0 border-b text-left bg-white z-30",children:n})}},8044:function(e,n,l){var s=l(184);n.Z=function(e){var n=e.children;return(0,s.jsx)("tr",{className:"border-b w-full",children:n})}},1815:function(e,n,l){var s=l(184);n.Z=function(e){var n=e.children;return(0,s.jsx)("table",{className:"table w-full",children:n})}},1064:function(e,n,l){l.r(n),l.d(n,{default:function(){return U}});var s=l(885),r=l(1413),t=l(2791),a=l(4068),i=l(8044),o=l(1815),d=l(7915),c=l(8636),u=l(6601),f=l(2982),m=l(1134),x=l(3359),h=l(2797),v=l(4695),p=l(2669),j=l(6030),w=l(5564),b=l(5218),g=l(1547),y=l(1758),Z=l(9483),N=l(4097),_=l(3375),k=l(1401),C=l(184);var A=function(e){return h.Ry().shape({name:"update"===e?h.Z_().nullable(!0):h.Z_().required().min(3).max(15),password:"update"===e?h.Z_().nullable(!0):h.Z_().required().min(5).max(15),role_id:"update"===e?h.Z_().nullable(!0):h.Rx().required(),sls_mans:"update"===e?h.IX().of(h.Ry().shape({id:h.Rx().required()})):h.Z_().nullable(!0)})},S=function(e){var n,l,a,i=e.visible,o=e.setCloseModal,d=e.form,c=e.values,u=(0,j.v9)((function(e){return e.auth.token})),h=(0,m.cI)({resolver:(0,v.X)(A(d))}),S=h.handleSubmit,D=h.errors,E=h.setValue,M=(h.getValues,h.watch,h.register),O=h.control,U=h.reset,I=(0,m.Dq)({control:O,name:"sls_mans",keyName:"key"}),R=I.fields,F=I.append,L=I.remove,T=(I.update,(0,t.useState)()),q=(0,s.Z)(T,2),z=q[0],P=(q[1],(0,t.useState)([])),H=(0,s.Z)(P,2),V=H[0],X=H[1];(0,t.useEffect)((function(){i&&"update"===d&&J((0,w.U2)({url:"api/admin/get-sales-mans/".concat(c.id),token:u,action:function(e){var n,l;e.success?(X(null===(n=e.data)||void 0===n?void 0:n.not_included),E("sls_mans",null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.included)):b.Am.error("Unknown error")}}))}),[i]);var B=(0,t.useState)([]),Q=(0,s.Z)(B,2),G=(Q[0],Q[1]),J=(0,j.I0)();return(0,t.useEffect)((function(){J((0,w.U2)({url:"api/user/get-firms",token:u,action:function(e){var n;e.success?G(null===(n=e.data.rows)||void 0===n?void 0:n.map((function(e){return{label:e.name,value:e.id}}))):b.Am.error("Unknown error")}}))}),[i]),(0,C.jsx)(x.Z,{visible:i,setCloseModal:function(){o(),X([]),U({name:"",password:"",role_id:"",sls_mans:[]})},title:"Operator add",size:"update"===d?"lg":"",children:(0,C.jsxs)("form",{onSubmit:S((function(e){if("update"===d){var n,l=null===(n=e.sls_mans)||void 0===n?void 0:n.filter((function(e){return!e.usm_id}));l.length&&J((0,w.v_)({url:"api/admin/add-sls-mans/".concat(null===c||void 0===c?void 0:c.id),token:u,data:l,action:function(e){e.success?console.log("Hello"):b.Am.error("Unknown error")}}))}"update"!==d&&J((0,w.v_)({url:"api/admin/add-operator",token:u,data:e,action:function(e){e.success?(console.log("hello"),o()):b.Am.error("Some error")}}))})),className:"w-full pb-12 flex flex-col justify-center items-center",children:["add"===d?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"w-full flex flex-col",children:[(0,C.jsxs)("div",{className:"relative w-full mb-6",children:[(0,C.jsx)("label",{children:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0418\u043c\u044f"}),(0,C.jsx)("input",(0,r.Z)((0,r.Z)({type:"text"},M("name")),{},{autoComplete:"false",className:"".concat(null!==D&&void 0!==D&&D.name?"border-2 border-red-300 ring-red-100":"ring-indigo-600"," px-3 shadow-inner h-10 w-full text-base bg-gray-50 rounded-md z-20 focus:bg-white focus:outline-none focus:ring-2 "),placeholder:"\u043d\u0430\u043f\u0440. \u0414\u043e\u0432\u0440\u0430\u043d \u0414\u0436\u0443\u043c\u0430\u043a\u0443\u043b\u044b\u0435\u0432"})),(0,C.jsx)("p",{className:"absolute bottom-0 left-0 -mb-4 text-xs font-medium text-red-400",children:null===D||void 0===D||null===(n=D.name)||void 0===n?void 0:n.message})]}),(0,C.jsxs)("div",{className:"relative w-full mb-6",children:[(0,C.jsx)("label",{children:"password"}),(0,C.jsx)("input",(0,r.Z)((0,r.Z)({type:"password"},M("password")),{},{autoComplete:"false",className:"".concat(null!==D&&void 0!==D&&D.password?"border-2 border-red-300 ring-red-100":"ring-indigo-600"," px-3 shadow-inner h-10 w-full text-base bg-gray-50 rounded-md z-20 focus:bg-white focus:outline-none focus:ring-2 "),placeholder:"\u043d\u0430\u043f\u0440. \u0414\u043e\u0432\u0440\u0430\u043d \u0414\u0436\u0443\u043c\u0430\u043a\u0443\u043b\u044b\u0435\u0432"})),(0,C.jsx)("p",{className:"absolute bottom-0 left-0 -mb-4 text-xs font-medium text-red-400",children:null===D||void 0===D||null===(l=D.password)||void 0===l?void 0:l.message})]}),(0,C.jsx)("div",{className:"relative w-full mb-6",children:(0,C.jsx)(m.Qr,{control:O,name:"role_id",render:function(e){var n=e.field,l=n.onChange,s=n.value;return(0,C.jsx)(p.Ph,{label:"Select frim",onChange:l,value:s,data:[{label:"Supervisor",value:3},{label:"Moderator",value:2}],placeholder:"Birini saylan"})}})})]})}):(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"relative flex flex-row w-full mb-4 shadow-inner bg-gray-50 lg:h-96 lg:max-h-96 h-64 max-h-64 min-w-600",children:[(0,C.jsx)("div",{className:"relative w-1/2 flex flex-col justify-start items-start px-2 rounded-lg h-full  overflow-y-auto",children:null===V||void 0===V?void 0:V.map((function(e,n){return(0,C.jsxs)("div",{className:"".concat(n%2===0?"bg-green-100":"bg-yellow-100"," w-full rounded-lg my-2 px-2 py-1 flex flex-row justify-between items-center"),children:[(0,C.jsx)(y.Z,{children:e.name}),(0,C.jsx)(Z.Z,{handleClick:function(){F((0,r.Z)({},e)),X(V.filter((function(n){return+e.id!==+n.id})))},icon:(0,C.jsx)(k.D,{className:"text-2xl "})})]},n)}))}),(0,C.jsx)("div",{className:"w-1 h-full bg-blue-300 rounded"}),(0,C.jsx)("div",{className:"".concat(null!==D&&void 0!==D&&null!==(a=D.sales_mans)&&void 0!==a&&a.message?" border-red-300 ring-red-100 border-2":""," relative w-1/2 flex flex-col justify-start items-start px-2  rounded-lg h-full  overflow-y-auto"),children:R.map((function(e,n){return(0,C.jsxs)("div",{className:"".concat(n%2===0?"bg-green-100":"bg-yellow-100"," w-full flex flex-col md:flex-row justify-center  lg:items-end my-2 px-2 rounded-md "),children:[(0,C.jsx)("div",{className:"w-full flex justify-start items-center md:h-full",children:(0,C.jsx)(y.Z,{children:e.name})}),(0,C.jsx)("div",{className:"w-48 flex justify-center items-center mt-6 lg:mt-0",children:e.usm_id?(0,C.jsx)("div",{className:"w-full flex flex-row justify-between items-center",children:(0,C.jsx)(Z.Z,{handleClick:function(){!function(e,n){J((0,w.v_)({url:"api/admin/delete-sls-man/".concat(e),token:u,action:function(e){e.success?L(n):b.Am.error("Unknown error")}}))}(e.usm_id,n),X([].concat((0,f.Z)(V),[{id:e.id,name:e.name}]))},icon:(0,C.jsx)(N.S,{className:"text-2xl"})})}):(0,C.jsx)("div",{className:"w-full flex flex-row justify-between items-center",children:(0,C.jsx)(Z.Z,{handleClick:function(){L(n)},icon:(0,C.jsx)(_.F,{className:"text-2xl "})})})})]},n)}))})]})}),(0,C.jsx)("button",{type:"submit",disabled:z,className:"w-40 flex remove-button-bg justify-center items-center px-4 h-15 text-white transform ease-in-out duration-300 hover:scale-110 active:scale-100 font-semibold text-base rounded-full bg-green-500 hover:bg-green-400 active:bg-green-500 focus:outline-none shadow-md",children:z?(0,C.jsx)("div",{className:"w-12 h-10 ",children:(0,C.jsx)(g.Z,{size:"sm"})}):(0,C.jsx)("div",{className:"h-10 flex justify-center items-center",children:"update"===d?"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})})},D=l(5071),E=l(1310).default;function M(e,n){switch(console.log(n),n.type){case"SET_DATA":return(0,r.Z)((0,r.Z)({},e),{},{data:n.payload.rows});case"OPEN_MODAL":return(0,r.Z)((0,r.Z)({},e),{},{visible:!0,form:"add"});case"ClOSE_MODAL":return(0,r.Z)((0,r.Z)({},e),{},{visible:!1});case"EDIT_MODAL":return(0,r.Z)((0,r.Z)({},e),{},{visible:!0,form:"update",values:n.payload});default:return(0,r.Z)({},e)}}var O=function(e){var n=e.handleClick;return(0,C.jsx)("div",{className:"flex flex-row justify-between items-center",children:(0,C.jsx)("div",{className:"w-80",children:(0,C.jsx)(Z.Z,{handleClick:n,icon:(0,C.jsx)(k.D,{className:"text-2xl"})})})})},U=function(){var e,n=(0,t.useReducer)(M,{data:[],loading:!1,visible:!1,values:{}}),l=(0,s.Z)(n,2),r=l[0],f=l[1],m=(0,j.v9)((function(e){return e.auth.token})),x=(0,j.I0)(),h={3:"Supervisor",2:"Moderator"};return(0,t.useEffect)((function(){x((0,w.U2)({url:"api/admin/get-users",token:m,action:function(e){e.success?f({type:"SET_DATA",payload:e.data}):b.Am.error("Unknown error")}}))}),[]),(0,C.jsxs)(E,{header:(0,C.jsx)(O,{handleClick:function(){return f({type:"OPEN_MODAL",payload:""})}}),children:[(0,C.jsx)(S,{visible:r.visible,setCloseModal:function(){return f({type:"ClOSE_MODAL",payload:""})},form:r.form,values:r.values}),r.loading?(0,C.jsx)(a.Z,{loading:r.loading}):(0,C.jsx)("div",{className:"w-full h-full px-6 py-6 overflow-y-auto",children:(0,C.jsxs)(o.Z,{children:[(0,C.jsx)(c.Z,{children:(0,C.jsx)(i.Z,{children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{className:"px-2 py-4 font-medium flex flex-row justify-center items-center",children:(0,C.jsx)("span",{children:"ID"})}),(0,C.jsx)(d.Z,{className:"px-2 py-4 font-medium flex flex-row justify-center items-center",children:(0,C.jsx)("span",{children:"Name"})}),(0,C.jsx)(d.Z,{className:"px-2 py-4 font-medium flex flex-row justify-center items-center",children:(0,C.jsx)("span",{children:"Role"})}),(0,C.jsx)(d.Z,{className:"px-2 py-4 font-medium flex flex-row justify-center items-center",children:(0,C.jsx)("span",{children:"Edit"})})]})})}),(0,C.jsx)(u.Z,{children:null===(e=r.data)||void 0===e?void 0:e.map((function(e){return(0,C.jsx)(i.Z,{children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{className:"p-2",children:e.id}),(0,C.jsx)(d.Z,{className:"p-2",children:e.name}),(0,C.jsx)(d.Z,{className:"p-2",children:h[+e.role_id]}),(0,C.jsx)(d.Z,{className:"p-2",children:(0,C.jsx)(Z.Z,{handleClick:function(){return f({type:"EDIT_MODAL",payload:e})},icon:(0,C.jsx)(D.H,{className:"text-2xl"})})})]})},e.id)}))})]})})]})}}}]);
//# sourceMappingURL=64.efe70d57.chunk.js.map